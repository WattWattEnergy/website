<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8" />
    <title>WattWatt - Solar Crowdfunding</title>
    <base href="/" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
  </head>

  <body class="mode">
    <app-root></app-root>

    <script src="https://verify.sendwyre.com/js/widget-loader.js"></script>
    <script>
      // configure the widget for metamask authentication
      var widget = new Wyre.Widget({
        env: "test",
        // type: "debitcard",
        accountId: "AC-EPLB2VQTJNH",
        auth: { type: "metamask" },
        operation: {
          type: "onramp",
          dest: "ethereum:0x98B031783d0efb1E65C4072C6576BaCa0736A912",
          sourceCurrency: "USD",
          destCurrency: "DAI",
          // destAmount: amount
        },
      });

    function Transfer(amount) {
      destAmount = amount;
      console.log("Index Transfer fn called");
      widget.open();
    };

        
    // configure the widget for token authentication
    // function Transfer1() {
    //   console.log("Index Transfer fn called1");
    //   var deviceToken = localStorage.getItem("DEVICE_TOKEN");
    //     if (!deviceToken) {
    //       var array = new Uint8Array(25);
    //       window.crypto.getRandomValues(array);
    //       deviceToken = Array.prototype.map
    //         .call(array, x => ("00" + x.toString(16)).slice(-2))
    //         .join("");
    //       localStorage.setItem("DEVICE_TOKEN", deviceToken);

    //   var widget = new Wyre.Widget({
    //       env: "test",
    //       accountId: "AC-EPLB2VQTJNH",
    //       auth: {
    //         type: "secretKey",
    //         secretKey: deviceToken
    //       },
    //       operation: {
    //         type: "debitcard",
    //         dest: "ethereum:0x98B031783d0efb1E65C4072C6576BaCa0736A912",
    //         sourceCurrency: "USD",
    //         destCurrency: "ETH",
    //         sourceAmount: 10.0
    //       }
    //     });
    //   destAmount = amount;
    //   console.log("Index Transfer fn called");
    //   widget.open();
    // };
    </script>
  </body>
</html>
